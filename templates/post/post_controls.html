{% if mod %}
    <span class="controls{{ not post.thread ? ' op' }}">
        {% if not post.shadow %}
            <br/>
            {% if mod|hasPermission(config.mod.delete, board.uri) %}
                {% set link_delete_title %}{% trans %}Delete{% endtrans %}{% endset %}
                {% set link_delete_confirm %}{% trans %}Are you sure you want to delete this?{% endtrans %}{% endset %}
                {{ secure_link_confirm(config.mod.link_delete, link_delete_title, link_delete_confirm, board.dir ~ 'delete/' ~ post.id) }}&nbsp;
                {% if mod|hasPermission(config.mod.auto_delete_shadow_post, board.uri) %}
                    {% set link_shadow_delete_confirm %}{% trans %}Are you sure you want to shadow delete this?{% endtrans %}{% endset %}
                    {% set link_shadow_delete_title %}{% trans %}Shadow Delete{% endtrans %}{% endset %}
                    {{ secure_link_confirm(config.mod.link_force_shadow_delete, link_shadow_delete_title, link_shadow_delete_confirm, board.dir ~ 'delete_shadow/' ~ post.id) }}&nbsp;
                {% endif %}
            {% endif %}

            {% if mod|hasPermission(config.mod.deletebyip, board.uri) %}
                {% set link_deletebyip_title %}{% trans %}Delete all posts by IP{% endtrans %}{% endset %}
                {% set link_deletebyip_confirm %}{% trans %}Are you sure you want to delete all posts by this IP address?{% endtrans %}{% endset %}
                {{ secure_link_confirm(config.mod.link_deletebyip, link_deletebyip_title, link_deletebyip_confirm, board.dir ~ 'deletebyip/' ~ post.id) }}&nbsp;
            {% endif %}

            {% if mod|hasPermission(config.mod.deletebyip_global, board.uri) %}
                {% set link_deletebyipglobal_title %}{% trans %}Delete all posts by IP across all boards{% endtrans %}{% endset %}
                {% set link_deletebyipglobal_confirm %}{% trans %}Are you sure you want to delete all posts by this IP address, across all boards?{% endtrans %}{% endset %}
                {{ secure_link_confirm(config.mod.link_deletebyip_global, link_deletebyipglobal_title, link_deletebyipglobal_confirm, board.dir ~ 'deletebyip&global/' ~ post.id) }}&nbsp;
            {% endif %}

            {% if mod|hasPermission(config.mod.bantz, board.uri) %}
                <a title="{% trans %}Add Bantz{% endtrans %}" href="?/{{ board.dir }}bantz/{{ post.id }}">{{ config.mod.link_bantz }}</a>&nbsp;
            {% endif %}

            {% if mod|hasPermission(config.mod.nicenotice, board.uri) %}
                <a title="{% trans %}Issue Nicenotice / Notice of Concern{% endtrans %}" href="?/{{ board.dir }}nicenotice/{{ post.id }}">{{ config.mod.link_nicenotice }}</a>&nbsp;
            {% endif %}

            {% if mod|hasPermission(config.mod.warning, board.uri) %}
                <a title="{% trans %}Issue Warning{% endtrans %}" href="?/{{ board.dir }}warning/{{ post.id }}">{{ config.mod.link_warning }}</a>&nbsp;
                {% if mod|hasPermission(config.mod.delete, board.uri) %}
                    <a title="{% trans %}Issue Warning and Delete{% endtrans %}" href="?/{{ board.dir }}warning&amp;delete/{{ post.id }}">{{ config.mod.link_warningdelete }}</a>&nbsp;
                {% endif %}
            {% endif %}

            {% if mod|hasPermission(config.mod.ban, board.uri) %}
                <a title="{% trans %}Ban{% endtrans %}" href="?/{{ board.dir }}ban/{{ post.id }}">{{ config.mod.link_ban }}</a>&nbsp;
            {% endif %}

            {% if mod|hasPermission(config.mod.bandelete, board.uri) %}
                <a title="{% trans %}Ban & Delete{% endtrans %}" href="?/{{ board.dir }}ban&amp;delete/{{ post.id }}">{{ config.mod.link_bandelete }}</a>&nbsp;
            {% endif %}

            {% if mod|hasPermission(config.mod.bandeletebyip, board.uri) %}
                <a title="{% trans %}Ban & Delete all posts by IP'{% endtrans %}" href="?/{{ board.dir }}ban&amp;deletebyip/{{ post.id }}">{{ config.mod.link_bandeletebyip }}</a>&nbsp;
            {% endif %}

            <br/>

            {% if not post.thread %}
                {% if mod|hasPermission(config.mod.sticky, board.uri) %}
                    <a title="{% if post.sticky %}{% trans %}Make thread not sticky{% endtrans %}{% else %}{% trans %}Make thread sticky{% endtrans %}{% endif %}" 
                    href="?/{{ secure_link(board.dir ~ (post.sticky ? 'unsticky/' : 'sticky/') ~ post.id) }}">{{ post.sticky ? config.mod.link_desticky : config.mod.link_sticky }}</a>&nbsp;
                {% endif %}

                {% if mod|hasPermission(config.mod.bumplock, board.uri) %}
                    <a title="{% if post.sage %}{% trans %}Allow thread to be bumped{% endtrans %}{% else %}{% trans %}Prevent thread from being bumped{% endtrans %}{% endif %}" 
                    href="?/{{ secure_link(board.dir ~ (post.sage ? 'bumpunlock/' : 'bumplock/') ~ post.id) }}">{{ post.sage ? config.mod.link_bumpunlock : config.mod.link_bumplock }}</a>&nbsp;
                {% endif %}

                {% if mod|hasPermission(config.mod.lock, board.uri) %}
                    <a title="{% if post.locked %}{% trans %}Unlock thread{% endtrans %}{% else %}{% trans %}Lock thread{% endtrans %}{% endif %}" 
                    href="?/{{ secure_link(board.dir ~ (post.locked ? 'unlock/' : 'lock/') ~ post.id) }}">{{ post.locked ? config.mod.link_unlock : config.mod.link_lock }}</a>&nbsp;
                {% endif %}

                {% if mod|hasPermission(config.mod.send_threads_to_archive, board.uri) %}
                    {% set link_sendarchive_title %}{% trans %}Send thread to archive{% endtrans %}{% endset %}
                    {% set link_sendarchive_confirm %}{% trans %}Are you sure you want to send thread to archive and delete it from the catalog?{% endtrans %}{% endset %}
                    {{ secure_link_confirm(config.mod.link_send_to_archive, link_sendarchive_title, link_sendarchive_confirm, board.dir ~ 'archive_thread/' ~ post.id) }}&nbsp;
                {% endif %}
            {% endif %}

            {% if mod|hasPermission(config.mod.move, board.uri) %}
                <a title="{% if not post.thread %}{% trans %}Move thread to another board{% endtrans %}{% else %}{% trans %}Move reply to another board{% endtrans %}{% endif %}" 
                    href="?/{{ board.dir }}{{ not post.thread ? 'move/' : 'move_reply/' }}{{ post.id }}">{{ config.mod.link_move }}</a>&nbsp;
            {% endif %}

            {% if mod|hasPermission(config.mod.cycle, board.uri) %}
                {% if not post.thread %}
                    <a title="{% if post.cycle %}{% trans %}Make thread not cycle{% endtrans %}{% else %}{% trans %}Make thread cycle{% endtrans %}{% endif %}" 
                    href="?/{{ secure_link(board.dir ~ (post.cycle ? 'uncycle/' : 'cycle/') ~ post.id) }}">{{ post.cycle ? config.mod.link_uncycle : config.mod.link_cycle }}</a>&nbsp;
                {% endif %}
            {% endif %}

            {% if mod|hasPermission(config.mod.merge, board.uri) %}
                {% if not post.thread %}
                    <a title="{% trans %}Merge thread with another thread{% endtrans %}" href="?/{{ board.dir }}merge/{{ post.id }}">{{ config.mod.link_merge }}</a>&nbsp;
                {% endif %}
            {% endif %}

            {% if mod|hasPermission(config.mod.hideid, board.uri) %}
                {% if not post.thread %}
                    <a title="{% if post.hideid %}{% trans %}Show Poster IDs in thread{% endtrans %}{% else %}{% trans %}Hide Poster IDs in thread{% endtrans %}{% endif %}" 
                        href="?/{{ secure_link(board.dir ~ (post.hideid ? 'unhideid/' : 'hideid/') ~ post.id) }}">{{ post.hideid ? config.mod.link_unhideid : config.mod.link_hideid }}</a>&nbsp;
                {% endif %}
            {% endif %}

            {% if mod|hasPermission(config.mod.editpost, board.uri) %}
                <a title="{% trans %}Edit post{% endtrans %}" href="?/{{ board.dir }}edit{{ config.mod.raw_html_default ? '_raw' : '' }}/{{ post.id }}">{{ config.mod.link_editpost }}</a>&nbsp;
            {% endif %}
        {% else %}
            {% if not post.no_shadow_restore %}
                {% if mod|hasPermission(config.mod.restore_shadow_post, board.uri) %}
                    <a title="{% trans %}Restore Shadow Deleted Post{% endtrans %}" href="?/{{ board.dir }}shadow_restore/{{ post.id }}/{{ post.thread ?? 0 }}">{{ config.mod.link_shadow_restore }}</a>&nbsp;
                {% endif %}
                {% if mod|hasPermission(config.mod.delete_shadow_post, board.uri) %}
                    <a title="{% trans %}Permanent Delete Shadow Deleted Post{% endtrans %}" href="?/{{ board.dir }}shadow_delete/{{ post.id }}">{{ config.mod.link_shadow_delete }}</a>&nbsp;
                {% endif %}
            {% endif %}
        {% endif %}
    </span>
{% endif %}
