{% if reasons %}
<script type="text/javascript">
$(window).on('load', (function(){
	{% for key, reason in reasons %}
		$('#ResonSelectorID_{{ key }}').click(function() { populateFormJQuery('#BanFormID', $.parseJSON(data_{{ key }})); });
		var data_{{ key }} = '{"reason":"{{ reason.reason|escape('js') }}","ban_length":"{{ reason.length|escape('js') }}"}';
	{% endfor %}
}));
</script>
{% endif %}

<p style="text-align: center">
O ban anterior será removido e as edições serão como um ban novo. Ou seja, o tempo de banimento anterior será desconsiderado pelo novo tempo a partir da data de edição.<br/>
A mensagem de ban no post <strong>NÃO</strong> será alterada.
</p>
<hr>
<h2 style="text-align:center">Ban atual</h2>
{% for ban in bans %}
	<form style="text-align:center; margin-bottom: unset">
		{% include 'mod/ban_history.html' %}
	</form>
	<hr>
	<h2 style="text-align:center">Novo ban</h2>
	<form action="" method="post" style="text-align:center" id="BanFormID">
		<input type="hidden" name="token" value="{{ security_token }}">
		<table style="margin-bottom:10px">
			<tr>
				<th>{% trans 'Reason' %}</th>
				<td>
					{% if ban.reason %}
						<textarea name="reason" id="reason" rows="5" cols="30">{{ ban.reason|e }}</textarea>
					{% else %}
						<textarea name="reason" id="reason" rows="5" cols="30"></textarea>
					{% endif %}
				</td>
			</tr>
			<tr>
				<th><label for="length">{% trans 'Length' %}</label></th>
				<td>
					<input type="text" name="ban_length" id="ban_length" size="20" maxlength="40">
					<span class="unimportant">(eg. "2d1h30m" or "2 days")</span></td>
			</tr>
			<tr>
				<th><label for="options">{% trans 'Options' %}</label></th>
				<td>
					{% if ban.post %}<label><input type="checkbox" id="raid" name="raid">Não mostrar post na banlist</label>{% endif %}
					<label><input type="checkbox" id="appeal" name="appeal" {% if not ban.appealable %}checked{% endif %}>Não permitir apelos</label>
				</td>
			</tr>
			<tr>
				<th>{% trans 'Board' %}</th>
				<td>
					<ul style="list-style:none;padding:2px 5px">
					{% if mod|hasPermission(config.mod.ban_all_boards) %}
						<li>
							<input type="radio" name="board" value="*" id="ban-allboards" {% if not ban.board %}checked{% endif %}>
							<label style="display:inline" for="ban-allboards"><em>{% trans 'all boards' %}</em></label>
						</li>
					{% endif %}
					{% for board in boards %}
						<li>
							<input type="radio" name="board" value="{{ board.uri }}" id="ban-board-{{ board.uri }}" {% if ban.board == board.uri %}checked{% endif %}>
							<label style="display:inline" for="ban-board-{{ board.uri }}">{{ config.board_abbreviation|format(board.uri) }} - {{ board.title|e }}</label>
						</li>
					{% endfor %}
					</ul>
				</td>
			</tr>
			<td></td>
			<td><input name="new_ban" type="submit" value="Enviar"></td>
		</table>
	</form>
{% endfor %}

{% if reasons %}
<h3>Predefined Ban Reasons:</h3>
<form>
<table class="ReasonTableForm" style="margin-left: unset">
	<tr>
		<th>Length</th>
		<th>Reason</th>
	</tr>
	{% for key, reason in reasons %}
		<tr id="ResonSelectorID_{{ key }}">
			<td>{% if not reason.length %}forever{% else %}{{ reason.length|e }}{% endif %}</td>
			<td>{{ reason.reason|e }}</td>
		</tr>
	{% endfor %}
</table>
</form>
{% endif %}
